<dom-module id="polymer-ready">

    <template>
        <iron-localstorage id="proxy" name="proxy" on-iron-localstorage-load-empty="_proxy" value="{{proxy}}"></iron-localstorage>

        <iron-localstorage id="torrent_db" name="torrent_db" on-iron-localstorage-load-empty="_torrent_db" value="{{torrent_db}}"></iron-localstorage>
    </template>

    <script>
    Polymer({

        _proxy: function() {
            this.proxy = false;
        },

        _torrent_db: function() {
            this.torrent_db = [];
        },

        is: "polymer-ready",

        observers: [
            "torrent_db_changed(torrent_db.splices)",
        ],

        properties: {
            proxy: {
                type: Boolean,
                value: false
            },
            torrent_db: {
                type: Array,
                value: function() {
                    return [];
                }
            }
        },

        torrent_db_changed: function(item) {
            Session.set("polymer-ready", (Session.get("polymer-ready") ? Session.get("polymer-ready") + 1 : 1));
        },

    });
    </script>

</dom-module>
